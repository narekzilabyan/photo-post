{% extends 'base.html.twig' %}

{% block body %}
    {{ parent() }}
    <main>
        <div class="container">
            <div class="filter">
            <form action="{{ path('post_list') }}" method="get" class="form-inline mt-2 mt-md-0 search-form" enctype="multipart/form-data">
                <input min="0" max="5" type="number" name="rating" value="{{ app.request.get('rating') }}" class="form-control mr-sm-2">
                <input type="date" name="date" value="{{ app.request.get('date') }}" class="form-control mr-sm-2">
                <button class="btn btn-primary filter-button" type="submit">Filter</button>
            </form>
            </div>


            {% for post in posts %}

                <div class="article">
                    <div class="well">
                        <div class="media">
                            <img class="media-object" src="/uploads/images/{{ post.imageName }}"/>
                            <div class="media-body">
                                <a class="pull-left" href="{{ path('post_show', { 'id': post.id }) }}">
                                    <h4 class="media-heading">{{ post.title }}</h4>
                                </a>
                                <ul class="article-data">
                                    <li><span>{{ post.date|date("F jS, Y") }}</span></li>
                                    <li>|</li>
                                    <li><span>Rating: {{ post.rating }}</span></li>
                                </ul>
                                <p>{{ post.description|length > 500 ? post.description|slice(0, 500) ~ '...' : post.description }}</p>
                            </div>
                        </div>
                    </div>
                </div>





                {#<table>#}
                {#<tr>#}
                {#<td>{{ post.title }}</td>#}
                {#<td>{{ post.description }}</td>#}
                {#<td>#}
                {#<a href="{{ path('post_show', { 'id': post.id }) }}">show</a>#}
                {#</td>#}
                {#<td>#}
                {#<a href="{{ path('post_edit', { 'id': post.id }) }}">edit</a>#}
                {#</td>#}
                {#<td>#}
                {#<a href="{{ path('post_delete', { 'id': post.id }) }}">delete</a>#}
                {#</td>#}
                {#</tr>#}
                {#</table>#}
            {% endfor %}
        </div>
    </main>
{% endblock %}
